"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Future = exports.default = void 0;

var _logger = _interopRequireDefault(require("@wdio/logger"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const log = (0, _logger.default)('@wdio/sync');
let Fiber;
let Future;
exports.Future = Future;

try {
  Fiber = require('fibers');
  exports.Future = Future = require('fibers/future');
} catch (e) {
  log.debug('Couldn\'t load fibers package for Node v10 and above');
}

if (!Fiber || !Future) {
  try {
    Fiber = require('fibers_node_v8');
    exports.Future = Future = require('fibers_node_v8/future');
  } catch (e) {
    log.debug('Couldn\'t load fibers package for Node v8');
  }
}

if (!Fiber || !Future) {
  throw new Error('No proper `fibers` package could be loaded. It might be not ' + 'supported with your current Node version. Please ensure to use ' + 'only WebdriverIOs recommended Node versions.');
}

var _default = Fiber;
exports.default = _default;